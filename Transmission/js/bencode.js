self.addEventListener("message",function(a){self.postMessage(a.data.decodeBencode())},false);(function(){var b=(function(){var j,m,e,k,g,n,i,f=0,d,l,h;function c(o){j=o;var p=k();if(p==="string"||p==="integer"){l(i(p))}else{l(e())}}e=function(){var s=k()==="list"?[]:{};d(1);var q=k();while(f<j.length){if(s instanceof Array){var o=h(q)?e():i(q);s.push(o)}else{if(s instanceof Object){var p=i(q);q=k();var r=h(q)?e():i(q);s[p]=r}else{throw new Error("Unkown object when iterating bencoded string")}}if(j.charAt(f)==="e"){d(1);return s}q=k()}};k=function(){var o=j.charAt(f);if(o.match(/\d/)){return"string"}switch(o){case"i":return"integer";case"l":return"list";case"d":return"dictionary";default:throw new Error("Format unreadable: "+o+" "+f+" | "+j)}};l=function(o){return m=o};d=function(o){return f+=o};i=function(o){return o==="string"?g():n()};h=function(o){return(o==="list"||o==="dictionary")?true:false};g=function(){var q=j.slice(f),p=q.split(":"),o=p[0];d(o.length+1+parseInt(o));q=p[1];return q.slice(0,o)};n=function(){var p=j.slice(f),o=p.slice(1,p.indexOf("e"));d(o.length+2);return parseInt(o)};c.prototype.getDecodedObject=function(){return m};return c})();String.prototype.decodeBencode=function(){if(this.length<2){throw new Error("Not in Bencode Format")}object=new b(this);return object.getDecodedObject()};var a=this;if(a.Bencode==null){a.Bencode={}}return a.Bencode.Decode=b}).call(this);